import{_ as q,r as w,u as ee,j as oe,o as n,b as i,e as o,t as te,F as se,m as ne,p as ae,n as O,q as r,s as L,x as N,G as k,l as V,y as j,g as b,z as M,i as G,T as re,h as W,A as p,f,B as P,a as le}from"./index-huDH7d48.js";const A="/assets/celeste-BpSAypSj.png",S="/assets/naranja-Ce6x07Fh.png",E="/assets/rojo-DmIeT1cK.png",I="/assets/verde-C5gJyMdZ.png",x="/assets/izquierda-IC_CWijx.png",y="/assets/derecha-D_PbDKdt.png",ie={key:0,class:"placeholder"},ce={key:1,class:"images-container"},de=["src"],ue={class:"image-selection"},me={class:"available-images"},ge=["src"],ve=["src"],pe=["src"],be=["src"],fe=["src"],we=["src"],he=9,xe={__name:"DragImagen",setup($){const c=w(""),a=async()=>{var t;if(k.value.length>0){const e=k.value[0],d={id:e.id,nombre:e.nombre,curso_id:e.curso_id,progreso:c.value};try{const m=await V.post("https://backend-flask.1jpfcu1s9m4w.us-south.codeengine.appdomain.cloud/actualizar_progreso",d);console.log("Progreso actualizado correctamente:",m.data)}catch(m){V.isAxiosError(m)?console.error("Error en la respuesta de Axios:",((t=m.response)==null?void 0:t.data)||m.message):console.error("Error desconocido:",m)}}else console.error("No hay grupo seleccionado.")},s=ee(),u=w([]),g=w(!1),_=w(!1);oe(_,t=>{t===!0&&(s.agregarNivel("Ingeniero"),c.value="Ingeniero",L.value=!0,N.value=!0,console.log(N),a(),k.value&&k.value.length>0&&(k.value[0].progreso=["Ingeniero"]))});const z=[E,y,y,y,I,x,x,x],B=t=>{const e=t;console.log(e),e.every((m,X)=>m===z[X])?(console.log("Orden correcto de comandos."),_.value=!0):console.log("Orden incorrecto de comandos.")};console.log(u);const C=t=>{let e;return t<0?e=256+t:e=t,new Uint8Array([1,1,1,e])},v=async(t,e)=>{if(window.motorCharacteristic)try{return await window.motorCharacteristic.writeValue(t),console.log(`Motor encendido con comando: ${t}`),new Promise(d=>{setTimeout(async()=>{const m=C(0);await window.motorCharacteristic.writeValue(m),console.log("Motor detenido."),d()},e)})}catch(d){console.error("Error enviando comando al motor:",d)}},l={[A]:new Uint8Array([6,4,1,3]),[E]:new Uint8Array([6,4,1,9]),[I]:new Uint8Array([6,4,1,6]),[S]:new Uint8Array([6,4,1,8])},D={[x]:async()=>{const t=C(-50);await v(t,700)},[y]:async()=>{const t=C(50);await v(t,700)}},U=t=>new Promise(e=>setTimeout(e,t)),K=async t=>{for(const e of t)await e()},R=async()=>{if(!window.motorCharacteristic||!window.colorCharacteristic){console.log("No hay conexión con el dispositivo WeDo.");return}const t=[];try{for(const e of u.value)l[e]?(console.log(`Enviando comando de color para: ${e}`),t.push(async()=>{await window.colorCharacteristic.writeValue(l[e]),await U(1e3)})):D[e]&&(console.log(`Enviando comando de motor para: ${e}`),t.push(D[e]));await K(t),console.log("Comandos enviados con éxito."),B(u.value)}catch(e){console.error("Error enviando los comandos:",e)}},h=t=>{u.value.length<he&&u.value.push(t)},Y=()=>{u.value=[]},H=t=>{t.preventDefault()},J=()=>{g.value=!0},Z=()=>{g.value=!1},Q=t=>{t.preventDefault(),g.value=!1};return(t,e)=>(n(),i("div",null,[o("div",{class:O(["drop-zone",{"drop-zone-dragging":g.value}]),onDragover:H,onDragenter:J,onDragleave:Z,onDrop:Q},[u.value.length?(n(),i("div",ce,[(n(!0),i(se,null,ne(u.value,(d,m)=>(n(),i("img",{key:m,src:d,class:"uploaded-image",onClick:e[0]||(e[0]=ae(()=>{},["stop"]))},null,8,de))),128))])):(n(),i("div",ie,te(g.value?"Suelta aquí":"Arrastra y suelta las imágenes"),1))],34),o("div",ue,[o("button",{class:"fun-button clearbutton",onClick:Y},"Limpiar Comandos"),o("button",{class:"fun-button sendbutton",onClick:R},"Enviar Comandos"),o("div",me,[o("img",{src:r(A),class:"selectable-image",img:"/src/assets/comandos/celeste.png",onClick:e[1]||(e[1]=d=>h(r(A)))},null,8,ge),o("img",{src:r(S),class:"selectable-image",onClick:e[2]||(e[2]=d=>h(r(S)))},null,8,ve),o("img",{src:r(E),class:"selectable-image",onClick:e[3]||(e[3]=d=>h(r(E)))},null,8,pe),o("img",{src:r(I),class:"selectable-image",onClick:e[4]||(e[4]=d=>h(r(I)))},null,8,be),o("img",{src:r(x),class:"selectable-image",onClick:e[5]||(e[5]=d=>h(r(x)))},null,8,fe),o("img",{src:r(y),class:"selectable-image",onClick:e[6]||(e[6]=d=>h(r(y)))},null,8,we)])])]))}},ye=q(xe,[["__scopeId","data-v-6fea4134"]]),_e="/assets/hub-BYzTpcug.png",Ce="/assets/bluethooth-BmqGGSNk.png",ke={key:0,class:"modal-mask"},$e={class:"modal-container"},De={class:"modal-header"},Ee={class:"modal-body"},Ie={class:"modal-footer"},T={__name:"Modal_instrucciones",props:{show:Boolean},setup($){return(c,a)=>(n(),j(re,{name:"modal"},{default:b(()=>[$.show?(n(),i("div",ke,[o("div",$e,[o("div",De,[M(c.$slots,"header",{},()=>[a[1]||(a[1]=W("default header"))])]),o("div",Ee,[M(c.$slots,"body",{},()=>[a[2]||(a[2]=W("default body"))])]),o("div",Ie,[M(c.$slots,"footer",{},()=>[o("button",{class:"bg-red-600 text-white font-bold py-4 px-6 rounded-full shadow-lg hover:bg-green-500 transition duration-300 text-2xl w-1/3",onClick:a[0]||(a[0]=s=>c.$emit("close"))}," OK ")])])])])):G("",!0)]),_:3}))}},Oe={class:"main-container"},je={key:0,id:"indicaciones",class:"text-center"},ze=["disabled"],Be={key:0},Me={key:1},Ae=["disabled"],Se={key:0},Le={key:1},Ne={__name:"Button_Connect",setup($){const c=w(!1),a=w(!1);let s=null,u=null,g=null,_=null;const z=()=>s&&s.gatt&&s.gatt.connected,B=async()=>{a.value=!0;try{s=await navigator.bluetooth.requestDevice({filters:[{services:["00001523-1212-efde-1523-785feabcd123"]}],optionalServices:["00004f0e-1212-efde-1523-785feabcd123","battery_service"]}),u=await s.gatt.connect();const v=await u.getPrimaryService("00004f0e-1212-efde-1523-785feabcd123");g=await v.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),_=await v.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),window.device=s,window.server=u,window.motorCharacteristic=g,window.colorCharacteristic=_,z()?(p.value=!0,console.log("Conectado a LEGO WeDo 2.0 con características disponibles.")):(console.error("La conexión falló."),p.value=!1)}catch(v){console.error("Error conectando al dispositivo WeDo:",v),p.value=!1}finally{a.value=!1}},C=async()=>{a.value=!0;try{window.device&&window.device.gatt.connected?(await window.device.gatt.disconnect(),p.value=!1,console.log("Desconectado de LEGO WeDo 2.0"),window.device=null,window.server=null,window.motorCharacteristic=null,window.colorCharacteristic=null):console.log("No hay dispositivo conectado para desconectar.")}catch(v){console.error("Error desconectando del dispositivo WeDo:",v)}finally{a.value=!1}};return(v,l)=>(n(),i("div",Oe,[r(p)?G("",!0):(n(),i("div",je,[l[2]||(l[2]=o("h1",{class:"text-2xl font-bold text-black rounded-lg shadow-md"}," Conectemos el Helicóptero al tablet ",-1)),l[3]||(l[3]=o("h2",{class:"text-xl font-bold text-black p-1 rounded-lg shadow-md"}," 1. Presiona durante 5 segundos el botón superior de tu helicóptero como se muestra en la imagen que sigue: ",-1)),l[4]||(l[4]=o("img",{src:_e,class:"mx-auto",height:"300px",width:"300px",alt:"Motor encendido"},null,-1)),o("button",{id:"show-modal-left",onClick:l[0]||(l[0]=D=>c.value=!0),class:"instruccion-button"}," Problemas de conexion ")])),(n(),j(P,{to:"body"},[f(T,{show:c.value,onClose:l[1]||(l[1]=D=>c.value=!1)},{header:b(()=>l[5]||(l[5]=[o("h2",{class:"text-xl font-bold text-black p-1 rounded-lg shadow-md"}," 2. Activa el bluetooth del Tablet presionando el siguiente ícono: ",-1),o("img",{src:Ce,class:"mx-auto",width:"70px",height:"70px",alt:"Bluetooth"},null,-1)])),body:b(()=>l[6]||(l[6]=[o("h2",{class:"text-xl font-bold text-black rounded-lg"}," Si se conectó a su modelo correctamente, debería mostrarse la siguiente pantalla ",-1)])),_:1},8,["show"])])),o("div",{class:O(["button-container",{centered:!r(p)}])},[r(p)?(n(),i("button",{key:1,onClick:C,class:O(["ml-10",{disconnect:r(p),loading:a.value}]),disabled:a.value},[a.value?(n(),i("span",Se,"Desconectando...")):(n(),i("span",Le,"Desconectar MODELO"))],10,Ae)):(n(),i("button",{key:0,onClick:B,class:O([{connect:!r(p),loading:a.value},"mt-52"]),disabled:a.value},[a.value?(n(),i("span",Be,"Buscando tu MODELO ...")):(n(),i("span",Me,"Conectar MODELO"))],10,ze))],2)]))}},F=q(Ne,[["__scopeId","data-v-59f3409b"]]),Pe={class:"lego-playground"},Te={class:"toy-border"},qe={class:"toy-content"},Ve={key:0,class:"connect-container"},We={key:1,class:"flex"},Fe={class:"w-5/5"},Ge={class:"flex justify-between mb-3"},Ue=["hidden"],Ke={__name:"VistaIngeniero",setup($){const c=w(!1);return(a,s)=>{const u=le("RouterLink");return n(),i("div",Pe,[o("div",Te,[o("div",qe,[s[4]||(s[4]=o("h1",{class:"playground-title"},null,-1)),r(p)?(n(),i("div",We,[o("div",Fe,[o("div",Ge,[o("button",{id:"show-modal-left",onClick:s[0]||(s[0]=g=>c.value=!0),class:"instruccion-button"}," Instrucciones "),f(u,{to:"/vista-final",class:"flex flex-col items-center"},{default:b(()=>[o("button",{hidden:!r(N),class:"avanzar-button"},"Avance al siguiente Nivel",8,Ue)]),_:1}),f(F)]),f(ye)]),s[3]||(s[3]=o("div",{class:"boton-container"},null,-1))])):(n(),i("div",Ve,[f(F)]))]),(n(),j(P,{to:"body"},[f(T,{show:c.value,onClose:s[1]||(s[1]=g=>c.value=!1)},{header:b(()=>s[5]||(s[5]=[o("h3",{class:"text-2xl font-extrabold text-purple-500 bg-yellow-300 p-4 rounded-lg shadow-md mb-4"}," El helicóptero debe ser funcional ",-1)])),body:b(()=>s[6]||(s[6]=[o("h3",{class:"text-xl font-bold text-pink-500 mb-4 leading-relaxed"}," Para rescatar a alguien de un incendio el canasto de nuestro helicóptero debe bajar 2 veces, detenerse colocar una luz roja, luego cambiar a una luz verde y subir 2 veces . ",-1),o("h3",{class:"text-xl font-bold text-green-500 mb-4 leading-relaxed"}," Programa la secuencia correspondiente arrastrando los objetos a la línea de comandos. Observa el número de cada objeto, indica el tiempo que se ejecuta. ",-1)])),_:1},8,["show"])])),(n(),j(P,{to:"body"},[f(T,{show:r(L),onClose:s[2]||(s[2]=g=>L.value=!1)},{header:b(()=>s[7]||(s[7]=[o("h3",{class:"text-2xl font-extrabold text-purple-500 bg-yellow-300 p-4 rounded-lg shadow-md mb-4"}," Felicidades haz completado el nivel de Programemos ahora estas listo para presentarle a tus demas compañer@s y profesor ",-1)])),body:b(()=>s[8]||(s[8]=[o("h3",{class:"text-xl font-bold text-green-500 mb-4 leading-relaxed"}," MUY bien hecho Equipo ",-1)])),_:1},8,["show"])]))])])}}},Ye=q(Ke,[["__scopeId","data-v-e99c3810"]]);export{Ye as default};
