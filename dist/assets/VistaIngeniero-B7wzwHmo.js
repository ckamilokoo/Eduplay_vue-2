import{_ as D,r as m,o as n,a as c,b as a,t as T,F as E,j as I,n as y,k as W,u as g,l as z,h as B,m as $,f,p as k,T as U,g as j,e as h,q as L}from"./index-Bgj7K9yQ.js";const P={key:0,class:"placeholder"},F={key:1,class:"images-container"},G=["src"],H={class:"image-selection"},K={class:"available-images"},R=["src","onClick"],J=7,Q={__name:"DragImagen",setup(w){const e=m([]),s=m(!1),v=m(["/src/assets/comandos/celeste.png","/src/assets/comandos/rojo.png","/src/assets/comandos/verde.png","/src/assets/comandos/naranja.png","/src/assets/comandos/izquierda.png","/src/assets/comandos/derecha.png"]),o=t=>{let r;return t<0?r=256+t:r=t,new Uint8Array([1,1,1,r])},l=async(t,r)=>{if(window.motorCharacteristic)try{return await window.motorCharacteristic.writeValue(t),console.log(`Motor encendido con comando: ${t}`),new Promise(u=>{setTimeout(async()=>{const p=o(0);await window.motorCharacteristic.writeValue(p),console.log("Motor detenido."),u()},r)})}catch(u){console.error("Error enviando comando al motor:",u)}},b={"/src/assets/comandos/celeste.png":new Uint8Array([6,4,1,3]),"/src/assets/comandos/rojo.png":new Uint8Array([6,4,1,9]),"/src/assets/comandos/verde.png":new Uint8Array([6,4,1,6]),"/src/assets/comandos/naranja.png":new Uint8Array([6,4,1,8]),"/src/assets/comandos/off.png":new Uint8Array([6,4,1,0])},_={"/src/assets/comandos/izquierda.png":async()=>{const t=o(-50);await l(t,700)},"/src/assets/comandos/derecha.png":async()=>{const t=o(50);await l(t,700)}},C=async t=>{for(const r of t)await r()},i=async()=>{if(!window.motorCharacteristic||!window.colorCharacteristic){console.log("No hay conexión con el dispositivo WeDo.");return}const t=[];try{for(const r of e.value)b[r]?(console.log(`Enviando comando de color para: ${r}`),t.push(async()=>{await window.colorCharacteristic.writeValue(b[r])})):_[r]&&(console.log(`Enviando comando de motor para: ${r}`),t.push(_[r]));await C(t),console.log("Comandos enviados con éxito.")}catch(r){console.error("Error enviando los comandos:",r)}},x=t=>{e.value.length<J&&e.value.push(t)},O=()=>{e.value=[]},S=t=>{t.preventDefault()},V=()=>{s.value=!0},A=()=>{s.value=!1},N=t=>{t.preventDefault(),s.value=!1};return(t,r)=>(n(),c("div",null,[a("div",{class:y(["drop-zone",{"drop-zone-dragging":s.value}]),onDragover:S,onDragenter:V,onDragleave:A,onDrop:N},[e.value.length?(n(),c("div",F,[(n(!0),c(E,null,I(e.value,(u,p)=>(n(),c("img",{key:p,src:u,class:"uploaded-image",onClick:r[0]||(r[0]=W(()=>{},["stop"]))},null,8,G))),128))])):(n(),c("div",P,T(s.value?"Suelta aquí":"Arrastra y suelta las imágenes"),1))],34),a("div",H,[a("button",{class:"fun-button clearbutton",onClick:O},"Limpiar Imágenes"),a("button",{class:"fun-button sendbutton",onClick:i},"Enviar Comandos"),a("div",K,[(n(!0),c(E,null,I(v.value,(u,p)=>(n(),c("img",{key:p,src:u,class:"selectable-image",onClick:ye=>x(u)},null,8,R))),128))])])]))}},X=D(Q,[["__scopeId","data-v-3723cbd5"]]),Y="/assets/motor_encendido-CE37SRvW.png",Z="/assets/bluethooth-BmqGGSNk.png",d=m(!1);m(null);const ee={class:"main-container"},oe={key:0,id:"indicaciones",class:"text-center"},se=["disabled"],te={key:0},ae={key:1},ne=["disabled"],re={key:0},ce={key:1},de={__name:"Button_Connect",setup(w){const e=m(!1);let s=null,v=null,o=null,l=null;const b=()=>s&&s.gatt&&s.gatt.connected,_=async()=>{e.value=!0;try{s=await navigator.bluetooth.requestDevice({filters:[{services:["00001523-1212-efde-1523-785feabcd123"]}],optionalServices:["00004f0e-1212-efde-1523-785feabcd123","battery_service"]}),v=await s.gatt.connect();const i=await v.getPrimaryService("00004f0e-1212-efde-1523-785feabcd123");o=await i.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),l=await i.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),window.device=s,window.server=v,window.motorCharacteristic=o,window.colorCharacteristic=l,b()?(d.value=!0,console.log("Conectado a LEGO WeDo 2.0 con características disponibles.")):(console.error("La conexión falló."),d.value=!1)}catch(i){console.error("Error conectando al dispositivo WeDo:",i),d.value=!1}finally{e.value=!1}},C=async()=>{e.value=!0;try{window.device&&window.device.gatt.connected?(await window.device.gatt.disconnect(),d.value=!1,console.log("Desconectado de LEGO WeDo 2.0"),window.device=null,window.server=null,window.motorCharacteristic=null,window.colorCharacteristic=null):console.log("No hay dispositivo conectado para desconectar.")}catch(i){console.error("Error desconectando del dispositivo WeDo:",i)}finally{e.value=!1}};return(i,x)=>(n(),c("div",ee,[g(d)?B("",!0):(n(),c("div",oe,x[0]||(x[0]=[z('<h1 class="text-xl font-bold text-black rounded-lg shadow-md" data-v-2dcddadf> Conectemos el Helicóptero al tablet </h1><h2 class="text-l font-bold text-black p-1 rounded-lg shadow-md" data-v-2dcddadf> 1. Presiona durante 5 segundos el botón superior de tu helicóptero como se muestra en la imagen que sigue: </h2><img src="'+Y+'" class="mx-auto" height="70px" width="70px" alt="Motor encendido" data-v-2dcddadf><h2 class="text-l font-bold text-black p-1 rounded-lg shadow-md" data-v-2dcddadf> 2. Activa el bluetooth del Tablet presionando el siguiente ícono: </h2><img src="'+Z+'" class="mx-auto" width="70px" height="70px" alt="Bluetooth" data-v-2dcddadf><h2 class="text-l font-bold text-black rounded-lg" data-v-2dcddadf> Si se conectó a su modelo correctamente, debería mostrarse la siguiente pantalla </h2>',6)]))),a("div",{class:y(["button-container",{centered:!g(d)}])},[g(d)?(n(),c("button",{key:1,onClick:C,class:y(["ml-10",{disconnect:g(d),loading:e.value}]),disabled:e.value},[e.value?(n(),c("span",re,"Desconectando...")):(n(),c("span",ce,"Desconectar MODELO"))],10,ne)):(n(),c("button",{key:0,onClick:_,class:y([{connect:!g(d),loading:e.value},"mt-52"]),disabled:e.value},[e.value?(n(),c("span",te,"Buscando tu MODELO ...")):(n(),c("span",ae,"Conectar MODELO"))],10,se))],2)]))}},M=D(de,[["__scopeId","data-v-2dcddadf"]]),le={key:0,class:"modal-mask"},ie={class:"modal-container"},ue={class:"modal-header"},me={class:"modal-body"},ve={class:"modal-footer"},q={__name:"Modal_instrucciones",props:{show:Boolean},setup(w){return(e,s)=>(n(),$(U,{name:"modal"},{default:f(()=>[w.show?(n(),c("div",le,[a("div",ie,[a("div",ue,[k(e.$slots,"header",{},()=>[s[1]||(s[1]=j("default header"))])]),a("div",me,[k(e.$slots,"body",{},()=>[s[2]||(s[2]=j("default body"))])]),a("div",ve,[k(e.$slots,"footer",{},()=>[a("button",{class:"bg-red-600 text-white font-bold py-4 px-6 rounded-full shadow-lg hover:bg-green-500 transition duration-300 text-2xl w-1/3",onClick:s[0]||(s[0]=v=>e.$emit("close"))}," OK ")])])])])):B("",!0)]),_:3}))}},ge={class:"lego-playground"},pe={class:"toy-border"},he={class:"toy-content"},fe={key:0,class:"connect-container"},we={key:1,class:"flex"},be={class:"w-5/5"},_e={class:"flex justify-between mb-3"},xe={__name:"VistaIngeniero",setup(w){const e=m(!1),s=m(!1);return(v,o)=>(n(),c("div",ge,[a("div",pe,[a("div",he,[o[4]||(o[4]=a("h1",{class:"playground-title"},null,-1)),g(d)?(n(),c("div",we,[a("div",be,[a("div",_e,[a("button",{id:"show-modal-left",onClick:o[0]||(o[0]=l=>e.value=!0),class:"instruccion-button"}," Instrucciones "),h(M),a("button",{id:"show-modal-right",onClick:o[1]||(o[1]=l=>s.value=!0),class:"comando-button"}," Comandos ")]),h(X)])])):(n(),c("div",fe,[h(M)]))]),(n(),$(L,{to:"body"},[h(q,{show:e.value,onClose:o[2]||(o[2]=l=>e.value=!1)},{header:f(()=>o[5]||(o[5]=[a("h3",{class:"text-2xl font-extrabold text-purple-500 bg-yellow-300 p-4 rounded-lg shadow-md mb-4"}," El helicóptero debe ser funcional ",-1)])),body:f(()=>o[6]||(o[6]=[a("h3",{class:"text-xl font-bold text-pink-500 mb-4 leading-relaxed"}," Para rescatar a alguien de un incendio el canasto de nuestro helicóptero debe bajar, detenerse, luego subir y volver a detenerse. Los recorridos de subida y bajada duran 5 segundos cada uno, entonces deben ser cuidadosos en no sobrepasar ese tiempo porque el motor u otra pieza del helicóptero. Las flechas indican en que dirección se mueve el canasto de rescate y los cuadrados rojos. ",-1),a("h3",{class:"text-xl font-bold text-green-500 mb-4 leading-relaxed"}," Programa la secuencia correspondiente arrastrando los objetos a la línea de comandos. Observa el número de cada objeto, indica el tiempo que se ejecuta. ",-1)])),_:1},8,["show"])])),(n(),$(L,{to:"body"},[h(q,{show:s.value,onClose:o[3]||(o[3]=l=>s.value=!1)},{header:f(()=>o[7]||(o[7]=[a("h3",null,"El helicóptero debe ser funcional",-1)])),body:f(()=>o[8]||(o[8]=[a("h3",null,"hola",-1)])),_:1},8,["show"])]))])]))}},ke=D(xe,[["__scopeId","data-v-9f3d070a"]]);export{ke as default};
