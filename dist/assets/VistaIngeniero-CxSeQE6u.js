import{_ as A,r as h,u as X,j as ee,o as n,a as l,b as t,t as oe,F as te,m as se,p as ae,n as E,q as r,s as S,G as b,l as q,x as g,y as ne,h as F,z,f as y,A as j,T as re,g as L,e as w,B as P}from"./index-CCVbRRTC.js";const B="/assets/celeste-BpSAypSj.png",M="/assets/naranja-Ce6x07Fh.png",$="/assets/rojo-DmIeT1cK.png",D="/assets/verde-C5gJyMdZ.png",x="/assets/izquierda-IC_CWijx.png",_="/assets/derecha-D_PbDKdt.png",le={key:0,class:"placeholder"},ce={key:1,class:"images-container"},ie=["src"],de={class:"image-selection"},ue={class:"available-images"},me=["src"],ge=["src"],ve=["src"],pe=["src"],he=["src"],fe=["src"],be=7,we={__name:"DragImagen",setup(C){const a=h(""),c=async()=>{var o;if(b.value.length>0){const e=b.value[0],i={id:e.id,nombre:e.nombre,curso_id:e.curso_id,progreso:a.value};try{const u=await q.post("https://backend-flask.1jpfcu1s9m4w.us-south.codeengine.appdomain.cloud/actualizar_progreso",i);console.log("Progreso actualizado correctamente:",u.data)}catch(u){q.isAxiosError(u)?console.error("Error en la respuesta de Axios:",((o=u.response)==null?void 0:o.data)||u.message):console.error("Error desconocido:",u)}}else console.error("No hay grupo seleccionado.")},s=X(),d=h([]),v=h(!1),k=h(!1);ee(k,o=>{o===!0&&(s.agregarNivel("Ingeniero"),a.value="Ingeniero",S.value=!0,c(),b.value&&b.value.length>0&&(b.value[0].progreso=["Ingeniero"]))});const I=[_,_,$,D,x,x],O=o=>{o.every((u,R)=>u===I[R])?(console.log("Orden correcto de comandos."),k.value=!0):console.log("Orden incorrecto de comandos.")};console.log(d);const m=o=>{let e;return o<0?e=256+o:e=o,new Uint8Array([1,1,1,e])},f=async(o,e)=>{if(window.motorCharacteristic)try{return await window.motorCharacteristic.writeValue(o),console.log(`Motor encendido con comando: ${o}`),new Promise(i=>{setTimeout(async()=>{const u=m(0);await window.motorCharacteristic.writeValue(u),console.log("Motor detenido."),i()},e)})}catch(i){console.error("Error enviando comando al motor:",i)}},N={[B]:new Uint8Array([6,4,1,3]),[$]:new Uint8Array([6,4,1,9]),[D]:new Uint8Array([6,4,1,6]),[M]:new Uint8Array([6,4,1,8])},T={[x]:async()=>{const o=m(-50);await f(o,700)},[_]:async()=>{const o=m(50);await f(o,700)}},G=o=>new Promise(e=>setTimeout(e,o)),U=async o=>{for(const e of o)await e()},K=async()=>{if(!window.motorCharacteristic||!window.colorCharacteristic){console.log("No hay conexión con el dispositivo WeDo.");return}const o=[];try{for(const e of d.value)N[e]?(console.log(`Enviando comando de color para: ${e}`),o.push(async()=>{await window.colorCharacteristic.writeValue(N[e]),await G(1e3)})):T[e]&&(console.log(`Enviando comando de motor para: ${e}`),o.push(T[e]));await U(o),console.log("Comandos enviados con éxito."),O(d.value)}catch(e){console.error("Error enviando los comandos:",e)}},p=o=>{d.value.length<be&&d.value.push(o)},Y=()=>{d.value=[]},H=o=>{o.preventDefault()},J=()=>{v.value=!0},Z=()=>{v.value=!1},Q=o=>{o.preventDefault(),v.value=!1};return(o,e)=>(n(),l("div",null,[t("div",{class:E(["drop-zone",{"drop-zone-dragging":v.value}]),onDragover:H,onDragenter:J,onDragleave:Z,onDrop:Q},[d.value.length?(n(),l("div",ce,[(n(!0),l(te,null,se(d.value,(i,u)=>(n(),l("img",{key:u,src:i,class:"uploaded-image",onClick:e[0]||(e[0]=ae(()=>{},["stop"]))},null,8,ie))),128))])):(n(),l("div",le,oe(v.value?"Suelta aquí":"Arrastra y suelta las imágenes"),1))],34),t("div",de,[t("button",{class:"fun-button clearbutton",onClick:Y},"Limpiar Comandos"),t("button",{class:"fun-button sendbutton",onClick:K},"Enviar Comandos"),t("div",ue,[t("img",{src:r(B),class:"selectable-image",img:"/src/assets/comandos/celeste.png",onClick:e[1]||(e[1]=i=>p(r(B)))},null,8,me),t("img",{src:r(M),class:"selectable-image",onClick:e[2]||(e[2]=i=>p(r(M)))},null,8,ge),t("img",{src:r($),class:"selectable-image",onClick:e[3]||(e[3]=i=>p(r($)))},null,8,ve),t("img",{src:r(D),class:"selectable-image",onClick:e[4]||(e[4]=i=>p(r(D)))},null,8,pe),t("img",{src:r(x),class:"selectable-image",onClick:e[5]||(e[5]=i=>p(r(x)))},null,8,he),t("img",{src:r(_),class:"selectable-image",onClick:e[6]||(e[6]=i=>p(r(_)))},null,8,fe)])])]))}},xe=A(we,[["__scopeId","data-v-ca14d770"]]),_e="/assets/hub-BYzTpcug.png",ye="/assets/bluethooth-BmqGGSNk.png",Ce={class:"main-container"},ke={key:0,id:"indicaciones",class:"text-center"},$e=["disabled"],De={key:0},Ee={key:1},Ie=["disabled"],Oe={key:0},je={key:1},Be={__name:"Button_Connect",setup(C){const a=h(!1);let c=null,s=null,d=null,v=null;const k=()=>c&&c.gatt&&c.gatt.connected,I=async()=>{a.value=!0;try{c=await navigator.bluetooth.requestDevice({filters:[{services:["00001523-1212-efde-1523-785feabcd123"]}],optionalServices:["00004f0e-1212-efde-1523-785feabcd123","battery_service"]}),s=await c.gatt.connect();const m=await s.getPrimaryService("00004f0e-1212-efde-1523-785feabcd123");d=await m.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),v=await m.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),window.device=c,window.server=s,window.motorCharacteristic=d,window.colorCharacteristic=v,k()?(g.value=!0,console.log("Conectado a LEGO WeDo 2.0 con características disponibles.")):(console.error("La conexión falló."),g.value=!1)}catch(m){console.error("Error conectando al dispositivo WeDo:",m),g.value=!1}finally{a.value=!1}},O=async()=>{a.value=!0;try{window.device&&window.device.gatt.connected?(await window.device.gatt.disconnect(),g.value=!1,console.log("Desconectado de LEGO WeDo 2.0"),window.device=null,window.server=null,window.motorCharacteristic=null,window.colorCharacteristic=null):console.log("No hay dispositivo conectado para desconectar.")}catch(m){console.error("Error desconectando del dispositivo WeDo:",m)}finally{a.value=!1}};return(m,f)=>(n(),l("div",Ce,[r(g)?F("",!0):(n(),l("div",ke,f[0]||(f[0]=[ne('<h1 class="text-2xl font-bold text-black rounded-lg shadow-md" data-v-57d175a4> Conectemos el Helicóptero al tablet </h1><h2 class="text-xl font-bold text-black p-1 rounded-lg shadow-md" data-v-57d175a4> 1. Presiona durante 5 segundos el botón superior de tu helicóptero como se muestra en la imagen que sigue: </h2><img src="'+_e+'" class="mx-auto" height="90px" width="90px" alt="Motor encendido" data-v-57d175a4><h2 class="text-xl font-bold text-black p-1 rounded-lg shadow-md" data-v-57d175a4> 2. Activa el bluetooth del Tablet presionando el siguiente ícono: </h2><img src="'+ye+'" class="mx-auto" width="70px" height="70px" alt="Bluetooth" data-v-57d175a4><h2 class="text-xl font-bold text-black rounded-lg" data-v-57d175a4> Si se conectó a su modelo correctamente, debería mostrarse la siguiente pantalla </h2>',6)]))),t("div",{class:E(["button-container",{centered:!r(g)}])},[r(g)?(n(),l("button",{key:1,onClick:O,class:E(["ml-10",{disconnect:r(g),loading:a.value}]),disabled:a.value},[a.value?(n(),l("span",Oe,"Desconectando...")):(n(),l("span",je,"Desconectar MODELO"))],10,Ie)):(n(),l("button",{key:0,onClick:I,class:E([{connect:!r(g),loading:a.value},"mt-52"]),disabled:a.value},[a.value?(n(),l("span",De,"Buscando tu MODELO ...")):(n(),l("span",Ee,"Conectar MODELO"))],10,$e))],2)]))}},V=A(Be,[["__scopeId","data-v-57d175a4"]]),Me={key:0,class:"modal-mask"},Se={class:"modal-container"},ze={class:"modal-header"},Ae={class:"modal-body"},Ne={class:"modal-footer"},W={__name:"Modal_instrucciones",props:{show:Boolean},setup(C){return(a,c)=>(n(),z(re,{name:"modal"},{default:y(()=>[C.show?(n(),l("div",Me,[t("div",Se,[t("div",ze,[j(a.$slots,"header",{},()=>[c[1]||(c[1]=L("default header"))])]),t("div",Ae,[j(a.$slots,"body",{},()=>[c[2]||(c[2]=L("default body"))])]),t("div",Ne,[j(a.$slots,"footer",{},()=>[t("button",{class:"bg-red-600 text-white font-bold py-4 px-6 rounded-full shadow-lg hover:bg-green-500 transition duration-300 text-2xl w-1/3",onClick:c[0]||(c[0]=s=>a.$emit("close"))}," OK ")])])])])):F("",!0)]),_:3}))}},Te={class:"lego-playground"},qe={class:"toy-border"},Le={class:"toy-content"},Pe={key:0,class:"connect-container"},Ve={key:1,class:"flex"},We={class:"w-5/5"},Fe={class:"flex justify-between mb-3"},Ge={__name:"VistaIngeniero",setup(C){const a=h(!1);return(c,s)=>(n(),l("div",Te,[t("div",qe,[t("div",Le,[s[3]||(s[3]=t("h1",{class:"playground-title"},null,-1)),r(g)?(n(),l("div",Ve,[t("div",We,[t("div",Fe,[t("button",{id:"show-modal-left",onClick:s[0]||(s[0]=d=>a.value=!0),class:"instruccion-button"}," Instrucciones "),w(V)]),w(xe)])])):(n(),l("div",Pe,[w(V)]))]),(n(),z(P,{to:"body"},[w(W,{show:a.value,onClose:s[1]||(s[1]=d=>a.value=!1)},{header:y(()=>s[4]||(s[4]=[t("h3",{class:"text-2xl font-extrabold text-purple-500 bg-yellow-300 p-4 rounded-lg shadow-md mb-4"}," El helicóptero debe ser funcional ",-1)])),body:y(()=>s[5]||(s[5]=[t("h3",{class:"text-xl font-bold text-pink-500 mb-4 leading-relaxed"}," Para rescatar a alguien de un incendio el canasto de nuestro helicóptero debe bajar 2 veces, detenerse colocar una luz roja, luego cambiar a una luz verde y subir 2 veces . ",-1),t("h3",{class:"text-xl font-bold text-green-500 mb-4 leading-relaxed"}," Programa la secuencia correspondiente arrastrando los objetos a la línea de comandos. Observa el número de cada objeto, indica el tiempo que se ejecuta. ",-1)])),_:1},8,["show"])])),(n(),z(P,{to:"body"},[w(W,{show:r(S),onClose:s[2]||(s[2]=d=>S.value=!1)},{header:y(()=>s[6]||(s[6]=[t("h3",{class:"text-2xl font-extrabold text-purple-500 bg-yellow-300 p-4 rounded-lg shadow-md mb-4"}," Felicidades haz completado el nivel de Programemos ahora estas listo para presentarle a tus demas compañer@s y profesor ",-1)])),body:y(()=>s[7]||(s[7]=[t("h3",{class:"text-xl font-bold text-green-500 mb-4 leading-relaxed"}," MUY bien hecho Equipo ",-1)])),_:1},8,["show"])]))])]))}},Ke=A(Ge,[["__scopeId","data-v-0ae12800"]]);export{Ke as default};
