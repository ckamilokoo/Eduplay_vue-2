import{_ as I,u as U,k as F,r as p,j as G,o as n,a as c,b as s,t as K,F as R,l as H,m as J,n as y,p as d,q as v,s as Z,h as M,x as D,f as x,y as $,T as Q,g as j,e as w,z as E}from"./index-BH83kc7z.js";const X="/assets/celeste-BpSAypSj.png",Y="/assets/naranja-Ce6x07Fh.png",ee="/assets/rojo-DmIeT1cK.png",oe="/assets/verde-C5gJyMdZ.png",se="/assets/izquierda-IC_CWijx.png",te="/assets/derecha-D_PbDKdt.png",ae={key:0,class:"placeholder"},ne={key:1,class:"images-container"},re=["src"],ce={class:"image-selection"},le={class:"available-images"},ie=7,de={__name:"DragImagen",setup(_){const a=U(),r=F(),l=p([]),t=p(!1),m=p(!1);G(m,o=>{o===!0&&(a.agregarNivel("Ingeniero"),d.value=!1,setTimeout(()=>{r.push("/")},5e3))});const C=["/src/assets/comandos/derecha.png","/src/assets/comandos/derecha.png","/src/assets/comandos/rojo.png","/src/assets/comandos/verde.png","/src/assets/comandos/izquierda.png","/src/assets/comandos/izquierda.png"],k=o=>{o.every((h,P)=>h===C[P])?(console.log("Orden correcto de comandos."),m.value=!0):console.log("Orden incorrecto de comandos.")};console.log(l);const b=o=>{let e;return o<0?e=256+o:e=o,new Uint8Array([1,1,1,e])},u=async(o,e)=>{if(window.motorCharacteristic)try{return await window.motorCharacteristic.writeValue(o),console.log(`Motor encendido con comando: ${o}`),new Promise(i=>{setTimeout(async()=>{const h=b(0);await window.motorCharacteristic.writeValue(h),console.log("Motor detenido."),i()},e)})}catch(i){console.error("Error enviando comando al motor:",i)}},f={"/src/assets/comandos/celeste.png":new Uint8Array([6,4,1,3]),"/src/assets/comandos/rojo.png":new Uint8Array([6,4,1,9]),"/src/assets/comandos/verde.png":new Uint8Array([6,4,1,6]),"/src/assets/comandos/naranja.png":new Uint8Array([6,4,1,8]),"/src/assets/comandos/off.png":new Uint8Array([6,4,1,0])},O={"/src/assets/comandos/izquierda.png":async()=>{const o=b(-50);await u(o,700)},"/src/assets/comandos/derecha.png":async()=>{const o=b(50);await u(o,700)}},B=o=>new Promise(e=>setTimeout(e,o)),L=async o=>{for(const e of o)await e()},T=async()=>{if(!window.motorCharacteristic||!window.colorCharacteristic){console.log("No hay conexión con el dispositivo WeDo.");return}const o=[];try{for(const e of l.value)f[e]?(console.log(`Enviando comando de color para: ${e}`),o.push(async()=>{await window.colorCharacteristic.writeValue(f[e]),await B(1e3)})):O[e]&&(console.log(`Enviando comando de motor para: ${e}`),o.push(O[e]));await L(o),console.log("Comandos enviados con éxito."),k(l.value)}catch(e){console.error("Error enviando los comandos:",e)}},g=o=>{l.value.length<ie&&l.value.push(o)},z=()=>{l.value=[]},N=o=>{o.preventDefault()},V=()=>{t.value=!0},A=()=>{t.value=!1},W=o=>{o.preventDefault(),t.value=!1};return(o,e)=>(n(),c("div",null,[s("div",{class:y(["drop-zone",{"drop-zone-dragging":t.value}]),onDragover:N,onDragenter:V,onDragleave:A,onDrop:W},[l.value.length?(n(),c("div",ne,[(n(!0),c(R,null,H(l.value,(i,h)=>(n(),c("img",{key:h,src:i,class:"uploaded-image",onClick:e[0]||(e[0]=J(()=>{},["stop"]))},null,8,re))),128))])):(n(),c("div",ae,K(t.value?"Suelta aquí":"Arrastra y suelta las imágenes"),1))],34),s("div",ce,[s("button",{class:"fun-button clearbutton",onClick:z},"Limpiar Imágenes"),s("button",{class:"fun-button sendbutton",onClick:T},"Enviar Comandos"),s("div",le,[s("img",{src:X,class:"selectable-image",img:"/src/assets/comandos/celeste.png",onClick:e[1]||(e[1]=i=>g("/src/assets/comandos/celeste.png"))}),s("img",{src:Y,class:"selectable-image",onClick:e[2]||(e[2]=i=>g("/src/assets/comandos/naranja.png"))}),s("img",{src:ee,class:"selectable-image",onClick:e[3]||(e[3]=i=>g("/src/assets/comandos/rojo.png"))}),s("img",{src:oe,class:"selectable-image",onClick:e[4]||(e[4]=i=>g("/src/assets/comandos/verde.png"))}),s("img",{src:se,class:"selectable-image",onClick:e[5]||(e[5]=i=>g("/src/assets/comandos/izquierda.png"))}),s("img",{src:te,class:"selectable-image",onClick:e[6]||(e[6]=i=>g("/src/assets/comandos/derecha.png"))})])])]))}},ue=I(de,[["__scopeId","data-v-01511996"]]),me="/assets/motor_encendido-CE37SRvW.png",ge="/assets/bluethooth-BmqGGSNk.png",ve={class:"main-container"},pe={key:0,id:"indicaciones",class:"text-center"},be=["disabled"],fe={key:0},he={key:1},we=["disabled"],xe={key:0},_e={key:1},ye={__name:"Button_Connect",setup(_){const a=p(!1);let r=null,l=null,t=null,m=null;const C=()=>r&&r.gatt&&r.gatt.connected,k=async()=>{a.value=!0;try{r=await navigator.bluetooth.requestDevice({filters:[{services:["00001523-1212-efde-1523-785feabcd123"]}],optionalServices:["00004f0e-1212-efde-1523-785feabcd123","battery_service"]}),l=await r.gatt.connect();const u=await l.getPrimaryService("00004f0e-1212-efde-1523-785feabcd123");t=await u.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),m=await u.getCharacteristic("00001565-1212-efde-1523-785feabcd123"),window.device=r,window.server=l,window.motorCharacteristic=t,window.colorCharacteristic=m,C()?(d.value=!0,console.log("Conectado a LEGO WeDo 2.0 con características disponibles.")):(console.error("La conexión falló."),d.value=!1)}catch(u){console.error("Error conectando al dispositivo WeDo:",u),d.value=!1}finally{a.value=!1}},b=async()=>{a.value=!0;try{window.device&&window.device.gatt.connected?(await window.device.gatt.disconnect(),d.value=!1,console.log("Desconectado de LEGO WeDo 2.0"),window.device=null,window.server=null,window.motorCharacteristic=null,window.colorCharacteristic=null):console.log("No hay dispositivo conectado para desconectar.")}catch(u){console.error("Error desconectando del dispositivo WeDo:",u)}finally{a.value=!1}};return(u,f)=>(n(),c("div",ve,[v(d)?M("",!0):(n(),c("div",pe,f[0]||(f[0]=[Z('<h1 class="text-2xl font-bold text-black rounded-lg shadow-md" data-v-a26a012b> Conectemos el Helicóptero al tablet </h1><h2 class="text-xl font-bold text-black p-1 rounded-lg shadow-md" data-v-a26a012b> 1. Presiona durante 5 segundos el botón superior de tu helicóptero como se muestra en la imagen que sigue: </h2><img src="'+me+'" class="mx-auto" height="70px" width="70px" alt="Motor encendido" data-v-a26a012b><h2 class="text-xl font-bold text-black p-1 rounded-lg shadow-md" data-v-a26a012b> 2. Activa el bluetooth del Tablet presionando el siguiente ícono: </h2><img src="'+ge+'" class="mx-auto" width="70px" height="70px" alt="Bluetooth" data-v-a26a012b><h2 class="text-xl font-bold text-black rounded-lg" data-v-a26a012b> Si se conectó a su modelo correctamente, debería mostrarse la siguiente pantalla </h2>',6)]))),s("div",{class:y(["button-container",{centered:!v(d)}])},[v(d)?(n(),c("button",{key:1,onClick:b,class:y(["ml-10",{disconnect:v(d),loading:a.value}]),disabled:a.value},[a.value?(n(),c("span",xe,"Desconectando...")):(n(),c("span",_e,"Desconectar MODELO"))],10,we)):(n(),c("button",{key:0,onClick:k,class:y([{connect:!v(d),loading:a.value},"mt-52"]),disabled:a.value},[a.value?(n(),c("span",fe,"Buscando tu MODELO ...")):(n(),c("span",he,"Conectar MODELO"))],10,be))],2)]))}},S=I(ye,[["__scopeId","data-v-a26a012b"]]),Ce={key:0,class:"modal-mask"},ke={class:"modal-container"},$e={class:"modal-header"},De={class:"modal-body"},Ie={class:"modal-footer"},q={__name:"Modal_instrucciones",props:{show:Boolean},setup(_){return(a,r)=>(n(),D(Q,{name:"modal"},{default:x(()=>[_.show?(n(),c("div",Ce,[s("div",ke,[s("div",$e,[$(a.$slots,"header",{},()=>[r[1]||(r[1]=j("default header"))])]),s("div",De,[$(a.$slots,"body",{},()=>[r[2]||(r[2]=j("default body"))])]),s("div",Ie,[$(a.$slots,"footer",{},()=>[s("button",{class:"bg-red-600 text-white font-bold py-4 px-6 rounded-full shadow-lg hover:bg-green-500 transition duration-300 text-2xl w-1/3",onClick:r[0]||(r[0]=l=>a.$emit("close"))}," OK ")])])])])):M("",!0)]),_:3}))}},Oe={class:"lego-playground"},je={class:"toy-border"},Ee={class:"toy-content"},Se={key:0,class:"connect-container"},qe={key:1,class:"flex"},Me={class:"w-5/5"},Be={class:"flex justify-between mb-3"},Le={__name:"VistaIngeniero",setup(_){const a=p(!1),r=p(!1);return(l,t)=>(n(),c("div",Oe,[s("div",je,[s("div",Ee,[t[4]||(t[4]=s("h1",{class:"playground-title"},null,-1)),v(d)?(n(),c("div",qe,[s("div",Me,[s("div",Be,[s("button",{id:"show-modal-left",onClick:t[0]||(t[0]=m=>a.value=!0),class:"instruccion-button"}," Instrucciones "),w(S),s("button",{id:"show-modal-right",onClick:t[1]||(t[1]=m=>r.value=!0),class:"comando-button"}," Comandos ")]),w(ue)])])):(n(),c("div",Se,[w(S)]))]),(n(),D(E,{to:"body"},[w(q,{show:a.value,onClose:t[2]||(t[2]=m=>a.value=!1)},{header:x(()=>t[5]||(t[5]=[s("h3",{class:"text-2xl font-extrabold text-purple-500 bg-yellow-300 p-4 rounded-lg shadow-md mb-4"}," El helicóptero debe ser funcional ",-1)])),body:x(()=>t[6]||(t[6]=[s("h3",{class:"text-xl font-bold text-pink-500 mb-4 leading-relaxed"}," Para rescatar a alguien de un incendio el canasto de nuestro helicóptero debe bajar, detenerse, luego subir y volver a detenerse. Los recorridos de subida y bajada duran 5 segundos cada uno, entonces deben ser cuidadosos en no sobrepasar ese tiempo porque el motor u otra pieza del helicóptero. Las flechas indican en que dirección se mueve el canasto de rescate y los cuadrados rojos. ",-1),s("h3",{class:"text-xl font-bold text-green-500 mb-4 leading-relaxed"}," Programa la secuencia correspondiente arrastrando los objetos a la línea de comandos. Observa el número de cada objeto, indica el tiempo que se ejecuta. ",-1)])),_:1},8,["show"])])),(n(),D(E,{to:"body"},[w(q,{show:r.value,onClose:t[3]||(t[3]=m=>r.value=!1)},{header:x(()=>t[7]||(t[7]=[s("h3",null,"El helicóptero debe ser funcional",-1)])),body:x(()=>t[8]||(t[8]=[s("h3",null,"hola",-1)])),_:1},8,["show"])]))])]))}},ze=I(Le,[["__scopeId","data-v-9f3d070a"]]);export{ze as default};
